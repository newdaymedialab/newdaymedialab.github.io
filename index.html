<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>NewDay Media Lab — AI POV Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#0b0f14;--panel:#0f1519;--accent:#f8b400;--muted:#9aa6b2;}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#e6eef6;background:linear-gradient(180deg,var(--bg),#071014);-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
.nav{position:sticky;top:0;display:flex;justify-content:space-between;padding:12px 20px;background:var(--panel);border-bottom:1px solid rgba(255,255,255,0.03)}
.nav .brand{display:flex;align-items:center;gap:12px}
.logo{width:44px;height:44px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),#ffca3c)}
.logo svg{width:26px;height:26px}
.menu{display:flex;gap:18px;align-items:center}
.menu a{color:var(--muted);font-weight:600;padding:8px;border-radius:8px}
.menu a:hover{color:#fff;background:rgba(255,255,255,0.02)}
.cta{background:var(--accent);color:#071014;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer}
.hero{max-width:1200px;margin:36px auto 18px;padding:28px 22px;display:grid;grid-template-columns:1fr 420px;gap:28px;align-items:start}
.hero-left h1{font-size:34px;margin:0 0 8px;color:#fff;line-height:1.03}
.hero-left p{margin:0 0 18px;color:var(--muted);font-size:15px}
.features{display:flex;gap:12px;flex-wrap:wrap}
.chip{background:var(--panel);padding:8px 12px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);font-weight:600;color:var(--muted);font-size:13px;cursor:pointer}
.hero-right{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03)}
.uploader{display:flex;flex-direction:column;gap:10px;position:relative}
input[type=file]{padding:12px;border:1px dashed rgba(255,255,255,0.06);border-radius:10px;color:var(--muted);background:var(--panel);}
.small{font-size:13px;color:var(--muted)}
.demo-thumb{width:100%;height:220px;border-radius:10px;background:linear-gradient(90deg,#071018,#0f1a22);display:flex;align-items:center;justify-content:center;border:1px solid rgba(255,255,255,0.02);color:var(--muted)}
#characterSelect{margin-top:10px;background:var(--panel);color:var(--muted);border-radius:8px;padding:6px 10px;font-size:14px;border:1px solid rgba(255,255,255,0.02);}
canvas{display:block;margin-top:10px;border-radius:10px;background:#000;}
@media(max-width:980px){.hero{grid-template-columns:1fr;padding:18px}.menu{display:none}}
</style>
</head>
<body>

<nav class="nav">
<div class="brand">
<div class="logo"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="9" fill="white" opacity="0.12"/><path d="M12 8a4 4 0 100 8 4 4 0 000-8z" fill="#071014" fill-opacity="0.9"/></svg></div>
<div><h3>NewDay Media Lab</h3><p class="muted">AI POV Demo</p></div>
</div>
<div class="menu">
<a href="#home">Home</a><a href="#project">Project</a><a href="#roadmap">Roadmap</a><a href="#support">Support</a>
</div>
<div style="display:flex;gap:10px;align-items:center">
<a class="cta" id="btnUploadTop">Upload</a>
</div>
</nav>

<main>
<section id="home" class="hero">
<div class="hero-left">
<h1>See the world through their eyes.</h1>
<p class="muted">Upload a short clip (5–59s) and choose a character to generate a POV video using AI.</p>
<div class="features" style="margin-top:14px">
<span class="chip">Short clips • 5–59s</span>
<span class="chip">AI POV</span>
<span class="chip">Prototype</span>
</div>
<div style="margin-top:18px;display:flex;gap:12px;align-items:center">
<a class="cta" id="heroUpload">Try Demo</a>
<select id="characterSelect" disabled>
<option value="none">Select Character</option>
<option value="soldier">Soldier</option>
<option value="athlete">Athlete</option>
<option value="child">Child</option>
<option value="robot">Robot</option>
</select>
</div>
</div>
<aside class="hero-right">
<div class="uploader">
<div class="demo-thumb">Demo preview</div>
<input type="file" id="fileInput" accept="video/mp4,video/quicktime">
<div class="small">Supported: MP4, MOV | Max 50MB</div>
<div style="display:flex;gap:10px;margin-top:8px">
<button class="chip" id="btnGenerate">Generate POV</button>
<button class="chip" id="btnPreview">Preview</button>
</div>
<div id="uploadStatus" class="small muted" style="margin-top:8px">No file selected.</div>
<video id="previewVideo" style="display:none;width:100%;border-radius:10px;margin-top:10px" controls></video>
<canvas id="povCanvas" width="420" height="220" style="display:none"></canvas>
</div>
</aside>
</section>
</main>

<script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.2/dist/ffmpeg.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded',()=>{
const { createFFmpeg, fetchFile }=FFmpeg;
const ffmpeg=createFFmpeg({ log:false });
const fileInput=document.getElementById('fileInput');
const uploadStatus=document.getElementById('uploadStatus');
const btnGenerate=document.getElementById('btnGenerate');
const btnPreview=document.getElementById('btnPreview');
const heroUpload=document.getElementById('heroUpload');
const btnUploadTop=document.getElementById('btnUploadTop');
const demoThumb=document.querySelector('.demo-thumb');
const previewVideo=document.getElementById('previewVideo');
const characterSelect=document.getElementById('characterSelect');
const povCanvas=document.getElementById('povCanvas');
const ctx=povCanvas.getContext('2d');

let selectedFile=null;

// Trigger file input
[heroUpload, btnUploadTop].forEach(btn => btn.addEventListener('click', () => fileInput.click()));

// File selection
fileInput.addEventListener('change', async()=>{
  selectedFile=fileInput.files[0];
  if(!selectedFile){uploadStatus.textContent="No file selected."; return;}
  if(!['video/mp4','video/quicktime'].includes(selectedFile.type)){
    uploadStatus.textContent="Unsupported file type! MP4/MOV only."; fileInput.value=''; return;
  }
  if(selectedFile.size>50*1024*1024){uploadStatus.textContent="File too large! Max 50MB."; fileInput.value=''; return;}

  const tmpVideo=document.createElement('video');
  tmpVideo.preload='metadata';
  tmpVideo.src=URL.createObjectURL(selectedFile);
  tmpVideo.onloadedmetadata=()=>{
    if(tmpVideo.duration<5 || tmpVideo.duration>59){
      uploadStatus.textContent="Video must be 5–59 seconds!"; fileInput.value=''; return;
    } else {
      uploadStatus.textContent=`File ready: ${selectedFile.name} (${Math.round(tmpVideo.duration)}s)`;
      demoThumb.textContent="Ready for preview or generation";
      characterSelect.disabled=false; // activate character selection
    }
  };
});

// Preview
btnPreview.addEventListener('click', async()=>{
  if(!selectedFile){alert("Select a file first"); return;}
  uploadStatus.textContent="Loading FFmpeg for preview...";
  if(!ffmpeg.isLoaded()) await ffmpeg.load();
  uploadStatus.textContent="Generating preview frame...";
  ffmpeg.FS('writeFile','input.mp4',await fetchFile(selectedFile));
  await ffmpeg.run('-i','input.mp4','-t','2','-c','copy','preview.mp4');
  const data=ffmpeg.FS('readFile','preview.mp4');
  const url=URL.createObjectURL(new Blob([data.buffer],{type:'video/mp4'}));
  previewVideo.src=url; previewVideo.style.display='block';
  demoThumb.style.display='none';
  povCanvas.style.display='none';
  uploadStatus.textContent="Preview ready!";
});

// POV Generation on canvas
btnGenerate.addEventListener('click', async()=>{
  if(!selectedFile){alert("Select a file first"); return;}
  if(characterSelect.value==='none'){alert("Select a character first"); return;}

  uploadStatus.textContent="Video is being processed...";
  demoThumb.style.display='none';
  previewVideo.style.display='none';
  povCanvas.style.display='block';

  const videoURL=URL.createObjectURL(selectedFile);
  const video=document.createElement('video');
  video.src=videoURL;
  video.muted=true;
  video.play();

  // Simple simulated AI POV with motion effect
  let offsetX=0, offsetY=0;
  const randomMotion=()=>Math.random()*4-2;

  video.addEventListener('loadeddata',()=>{
    const drawFrame=()=>{
      if(video.paused || video.ended) return;
      offsetX=randomMotion(); offsetY=randomMotion();
      ctx.clearRect(0,0,povCanvas.width,povCanvas.height);
      ctx.drawImage(video, offsetX, offsetY, povCanvas.width, povCanvas.height);

      // Color overlay per character
      switch(characterSelect.value){
        case 'soldier': ctx.fillStyle='rgba(0,128,0,0.2)'; break;
        case 'athlete': ctx.fillStyle='rgba(255,255,0,0.2)'; break;
        case 'child': ctx.fillStyle='rgba(255,192,203,0.2)'; break;
        case 'robot': ctx.fillStyle='rgba(0,255,255,0.2)'; break;
      }
      ctx.fillRect(0,0,povCanvas.width,povCanvas.height);

      requestAnimationFrame(drawFrame);
    };
    drawFrame();
    uploadStatus.textContent=`POV generated for ${characterSelect.value}.`;
  });

  video.addEventListener('ended',()=>{
    uploadStatus.textContent="POV playback ended.";
  });
});
});
</script>

</body>
</html>
